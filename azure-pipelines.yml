# azure-cosmos-cassandra-driver-4-extensions build pipeline
# Builds and runs tests with Apache Maven.
# Reference: https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- develop/java-driver-4
- release/java-driver-4/*

pr:
- develop/java-driver-4
- release/java-driver-4/*

variables:

- name: Azure.Cosmos.Cassandra.Preferred.Regions
  value: '$(AZURE_COSMOS_CASSANDRA_PREFERRED_REGION_1),$(AZURE_COSMOS_CASSANDRA_PREFERRED_REGION_2),$(AZURE_COSMOS_CASSANDRA_PREFERRED_REGION_3)'
  readonly: true

- name: Azure.Cosmos.Cassandra.Regional.Endpoints
  value: '$(AZURE_COSMOS_CASSANDRA_REGIONAL_ENDPOINT_1),$(AZURE_COSMOS_CASSANDRA_REGIONAL_ENDPOINT_2),$(AZURE_COSMOS_CASSANDRA_REGIONAL_ENDPOINT_3)'

- name: Azure.Cosmos.Cassandra.Truststore.Content
  value: >
    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
    zP6+miLRcWACAwGGoA==
  readonly: true

- name: Azure.Cosmos.Cassandra.Truststore.Path
  value: $(Build.Repository.LocalPath)/truststore.p12
  readonly: true

- name: Azure.Cosmos.Cassandra.Log.File
  value: $(Build.ArtifactStagingDirectory)/azure-cosmos-cassandra-driver-4.log
  readonly: true

- name: Azure.Cosmos.Cassandra.Reporting.Directory
  value: $(Build.ArtifactStagingDirectory)
  readonly: true

- name: New-JavaTruststore
  value: |
    Set-Content -Path "${env:AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PATH}" -AsByteStream -Value ([System.Convert]::FromBase64String("${env:AZURE_COSMOS_CASSANDRA_TRUSTSTORE_CONTENT}"))
    "Keystore path: ${env:AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PATH}"
    keytool -list -keystore "${env:AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PATH}" -storepass "${env:AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD}"

- name: Stage-Artifacts
  value: |
    $packageName = [System.IO.Path]::GetFileNameWithoutExtension($(Get-Item *.jar -Exclude *-sources.jar,*-javadoc.jar).Name)
    $targetDirectory = New-Item -ItemType Directory (Join-Path $Env:BUILD_ARTIFACTSTAGINGDIRECTORY ${packageName})

    Copy-Item *.jar $targetDirectory
    Copy-Item (Join-Path .. pom.xml) (Join-Path ${targetDirectory} ${packageName}.pom)

    $packageName = $packageName.Split("-extensions-") -join "-"
    $targetDirectory = New-Item -ItemType Directory (Join-Path $Env:BUILD_ARTIFACTSTAGINGDIRECTORY ${packageName})

    Copy-Item (Join-Path .. .. pom.xml) (Join-Path ${targetDirectory} ${packageName}.pom)
  readonly: true

- name: Update-GithubSubmodules
  value: |
    git submodule update --init --recursive
  readonly: true

jobs:

- job: Build_with_Java_8
  strategy:
    matrix:
      Linux:
        ImageName: 'ubuntu-latest'
      MacOS:
        ImageName: 'macos-latest'
      Windows:
        ImageName: 'windows-latest'
    maxParallel: 1
  pool:
    vmImage: $(ImageName)
  steps:
  - task: PowerShell@2
    displayName: Update GitHub Submodules
    inputs:
      targetType: inline
      script: $(Update-GithubSubmodules)
      pwsh: true
      workingDirectory: $(Build.Repository.LocalPath)
  - task: Maven@3
    displayName: 'Build'
    inputs:
      mavenPomFile: 'pom.xml'
      javaHomeOption: 'JDKVersion'
      jdkVersionOption: '1.8'
      jdkArchitectureOption: 'x64'
      mavenOptions: '-Xmx3072m'
      goals: 'install'
      options: '-DskipTests'
  - task: PowerShell@2
    displayName: 'Create Java truststore'
    inputs:
      targetType: 'inline'
      script: $(New-JavaTruststore)
      pwsh: true
      workingDirectory: '$(Build.ArtifactStagingDirectory)'
    env:
      AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD: $(AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD)
  - task: Maven@3
    displayName: 'Verify driver-4 extensions'
    inputs:
      mavenPomFile: 'driver-4/pom.xml'
      javaHomeOption: 'JDKVersion'
      jdkVersionOption: '1.8'
      jdkArchitectureOption: 'x64'
      mavenOptions: '-Xmx3072m'
      goals: 'verify'
      options: -Dcheckstyle.skip -Dmaven.main.skip
      testResultsFiles: '**/surefire-reports/TEST-*.xml'
      publishJUnitResults: true
    env:
      AZURE_COSMOS_CASSANDRA_PASSWORD: $(AZURE_COSMOS_CASSANDRA_PASSWORD)
      AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD: $(AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD)
  - task: Maven@3
    displayName: 'Verify java-driver-app example'
    inputs:
      mavenPomFile: 'examples/java-driver-app/pom.xml'
      mavenOptions: '-Xmx3072m'
      javaHomeOption: 'JDKVersion'
      jdkVersionOption: '1.8'
      jdkArchitectureOption: 'x64'
      goals: 'verify'
      options: "-Dcheckstyle.skip -Dmaven.main.skip -DargLine=\"-Dazure.cosmos.cassandra.jar='${project.build.directory}/${project.build.finalName}.jar' -Dazure.cosmos.cassandra.log-path='${project.basedir}'\""
      testResultsFiles: '**/surefire-reports/TEST-*.xml'
      publishJUnitResults: true
    env:
      AZURE_COSMOS_CASSANDRA_JAVA_OPTIONS: $(AZURE_COSMOS_CASSANDRA_JAVA_OPTIONS)
      AZURE_COSMOS_CASSANDRA_PASSWORD: $(AZURE_COSMOS_CASSANDRA_PASSWORD)
      AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD: $(AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD)
  - task: Maven@3
    displayName: 'Verify spring-boot-app example'
    inputs:
      mavenPomFile: 'examples/spring-boot-app/pom.xml'
      mavenOptions: '-Xmx3072m'
      javaHomeOption: 'JDKVersion'
      jdkVersionOption: '1.8'
      jdkArchitectureOption: 'x64'
      goals: 'verify'
      options: "-Dcheckstyle.skip -Dmaven.main.skip -DargLine=\"-Dazure.cosmos.cassandra.jar='${project.build.directory}/${project.build.finalName}.jar' -Dazure.cosmos.cassandra.log-path='${project.basedir}'\""
      testResultsFiles: '**/surefire-reports/TEST-*.xml'
      publishJUnitResults: true
    env:
      AZURE_COSMOS_CASSANDRA_PASSWORD: $(AZURE_COSMOS_CASSANDRA_PASSWORD)
      AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD: $(AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD)
  - task: PowerShell@2
    displayName: 'Stage driver-4 artifacts'
    inputs:
      targetType: 'inline'
      script: $(Stage-Artifacts)
      pwsh: true
      workingDirectory: '$(Build.Repository.LocalPath)/driver-4/target'
  - task: PowerShell@2
    displayName: 'Stage spring-data artifacts'
    inputs:
      targetType: 'inline'
      script: $(Stage-Artifacts)
      pwsh: true
      workingDirectory: '$(Build.Repository.LocalPath)/spring-data/target'
  - task: PublishPipelineArtifact@1
    displayName: 'Publish staged artifacts'
    inputs:
      targetPath: '$(Build.ArtifactStagingDirectory)'
      artifact: 'driver-4.java-8.$(ImageName)'
      publishLocation: 'pipeline'

- job: Build_with_Java_11
  strategy:
    matrix:
      Linux:
        ImageName: 'ubuntu-latest'
      MacOS:
        ImageName: 'macos-latest'
      Windows:
        ImageName: 'windows-latest'
    maxParallel: 1
  pool:
    vmImage: $(ImageName)
  steps:
  - task: PowerShell@2
    displayName: Update GitHub Submodules
    inputs:
      targetType: inline
      script: $(Update-GithubSubmodules)
      pwsh: true
      workingDirectory: $(Build.Repository.LocalPath)
  - task: Maven@3
    displayName: 'Build'
    inputs:
      mavenPomFile: 'pom.xml'
      javaHomeOption: 'JDKVersion'
      jdkVersionOption: '1.11'
      jdkArchitectureOption: 'x64'
      mavenOptions: '-Xmx3072m'
      goals: 'install'
      options: '-DskipTests'
  - task: PowerShell@2
    displayName: 'Create Java truststore'
    inputs:
      targetType: 'inline'
      script: $(New-JavaTruststore)
      pwsh: true
      workingDirectory: '$(Build.ArtifactStagingDirectory)'
    env:
      AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD: $(AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD)
  - task: Maven@3
    displayName: 'Verify driver-4 extensions'
    inputs:
      mavenPomFile: 'driver-4/pom.xml'
      javaHomeOption: 'JDKVersion'
      jdkVersionOption: '1.11'
      jdkArchitectureOption: 'x64'
      mavenOptions: '-Xmx3072m'
      goals: 'verify'
      options: -Dcheckstyle.skip -Dmaven.main.skip
      testResultsFiles: '**/surefire-reports/TEST-*.xml'
      publishJUnitResults: true
    env:
      AZURE_COSMOS_CASSANDRA_JAVA_OPTIONS: $(AZURE_COSMOS_CASSANDRA_JAVA_OPTIONS)
      AZURE_COSMOS_CASSANDRA_PASSWORD: $(AZURE_COSMOS_CASSANDRA_PASSWORD)
      AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD: $(AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD)
  - task: Maven@3
    displayName: 'Verify java-driver-app example'
    inputs:
      mavenPomFile: 'examples/java-driver-app/pom.xml'
      mavenOptions: '-Xmx3072m'
      javaHomeOption: 'JDKVersion'
      jdkVersionOption: '1.8'
      jdkArchitectureOption: 'x64'
      goals: 'verify'
      options: "-Dcheckstyle.skip -Dmaven.main.skip -DargLine=\"-Dazure.cosmos.cassandra.jar='${project.build.directory}/${project.build.finalName}.jar' -Dazure.cosmos.cassandra.log-path='${project.basedir}'\""
      testResultsFiles: '**/surefire-reports/TEST-*.xml'
      publishJUnitResults: true
    env:
      AZURE_COSMOS_CASSANDRA_PASSWORD: $(AZURE_COSMOS_CASSANDRA_PASSWORD)
      AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD: $(AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD)
  - task: Maven@3
    displayName: 'Verify spring-boot-app example'
    inputs:
      mavenPomFile: 'examples/spring-boot-app/pom.xml'
      mavenOptions: '-Xmx3072m'
      javaHomeOption: 'JDKVersion'
      jdkVersionOption: '1.11'
      jdkArchitectureOption: 'x64'
      goals: 'verify'
      options: "-Dcheckstyle.skip -Dmaven.main.skip -DargLine=\"-Dazure.cosmos.cassandra.jar='${project.build.directory}/${project.build.finalName}.jar' -Dazure.cosmos.cassandra.log-path='${project.basedir}'\""
      testResultsFiles: '**/surefire-reports/TEST-*.xml'
      publishJUnitResults: true
    env:
      AZURE_COSMOS_CASSANDRA_PASSWORD: $(AZURE_COSMOS_CASSANDRA_PASSWORD)
      AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD: $(AZURE_COSMOS_CASSANDRA_TRUSTSTORE_PASSWORD)
  - task: PowerShell@2
    displayName: 'Stage driver-4 artifacts'
    inputs:
      targetType: 'inline'
      script: $(Stage-Artifacts)
      pwsh: true
      workingDirectory: '$(Build.Repository.LocalPath)/driver-4/target'
  - task: PowerShell@2
    displayName: 'Stage spring-data artifacts'
    inputs:
      targetType: 'inline'
      script: $(Stage-Artifacts)
      pwsh: true
      workingDirectory: '$(Build.Repository.LocalPath)/spring-data/target'
  - task: PublishPipelineArtifact@1
    displayName: 'Publish staged artifacts'
    inputs:
      targetPath: '$(Build.ArtifactStagingDirectory)'
      artifact: 'driver-4.java-11.$(ImageName)'
      publishLocation: 'pipeline'
